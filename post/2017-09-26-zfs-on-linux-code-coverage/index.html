<!DOCTYPE html>
<html>
  <head>
    <meta name="generator" content="Hugo 0.40.1" />
<meta charset="utf-8">
<link rel="canonical" href="https://www.prakashsurya.com/post/2017-09-26-zfs-on-linux-code-coverage/">
<script src="/js/remark.min.js"></script>
<style type="text/css">
  @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
  @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
  @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

  body { font-family: 'Droid Serif'; }
  h1, h2, h3 {
    font-family: 'Yanone Kaffeesatz';
    font-weight: 400;
    margin-bottom: 0;
  }

  .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
  .remark-slide-content h1 { font-size: 3em; }
  .remark-slide-content h2 { font-size: 2em; }
  .remark-slide-content h3 { font-size: 1.6em; }
  .remark-slide-content a, a > code { text-decoration: none; }
  .footnote { position: absolute; bottom: 3em; font-size: .6em; }
  .pull-left { float: left; width: 47%; }
  .pull-right { float: right; width: 47%; }
  .pull-right ~ p { clear: both; }

   

  @page {
     
    size: 908px 681px;
    margin: 0;
  }

  @media print {
    .remark-slide-scaler {
      width: 100% !important;
      height: 100% !important;
      transform: scale(1) !important;
      top: 0 !important;
      left: 0 !important;
    }
  }
</style>

    <title>ZFS on Linux Code Coverage &raquo www.prakashsurya.com</title>
  </head>
  <body>
    <main>
  <textarea id="source">
class: middle
# ZFS on Linux Code Coverage

---
# Branches &#43; Pull Requests

 - Code coverage data is collected for:

    - All commits merged to a branch (e.g. master)

    - All pull requests for the &#34;zfs&#34; project

 - Code coverage collected after running **all** tests

    - ztest, zfstest, zfsstress, etc.

 - Data generated using `make code-coverage-capture` ...

    - Emits `.info` file and static HTML pages

 - `.info` file uploaded to `codecov.io`

 - [ZFS on Linux &#43; Codecov](https://codecov.io/gh/zfsonlinux/zfs)

---

# User &#43; Kernel

 - Code coverage data is collected for:

    - User mode execution (e.g. libzpool, zdb, etc.)

    - Kernel mode execution (e.g. &#34;zfs&#34; kernel module)

 - Same file _may_ be executed in user and kernel mode

    - e.g. libzpool references files in &#34;modules&#34; directories

 - User coverage enabled via `--enable-code-coverage` option

 - Kernel coverage enabled via custom kernel

    - More details [here](/post/2017-09-11-using-gcov-with-zfs-on-linux-kernel-modules/)

---

# Codecov: Header

.center[![:scale 100%](header.png)]

---

# Codecov: Diff

.center[![:scale 100%](diff.png)]

---

# Codecov: Files

.center[![:scale 100%](files.png)]

---

# Codecov: Files (continued)

.center[![:scale 100%](files-module-zfs.png)]

---

# Codecov: Flags

.center[![:scale 100%](flags.png)]

---

# Codecov: Build

.center[![:scale 100%](build.png)]

---

# Codecov: Graphs

.center[![:scale 100%](graphs.png)]

---

# Codecov: PR Comment

.center[![:scale 75%](pr-comment.png)]

---

# Coverage Integrated w/ Commits Page

.center[![:scale 100%](commits-page.png)]

---
class: center, middle
# End
  </textarea>
  <script>
    

    remark.macros.scale = function (percentage) {
      var url = this;
      return '<img src="' + url + '" style="width: ' + percentage + '" />';
    };

    var slideshow = remark.create({ ratio: '4:3' });
  </script>
</main>
  </body>
</html>
