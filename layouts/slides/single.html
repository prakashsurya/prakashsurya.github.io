{{ define "main" }}
  <textarea id="source">
class: center, middle
# {{ .Title }}
---
{{ .RawContent }}
---
class: center, middle
# End
  </textarea>
  <script>
    /*
     * Adding a macro to allow easily scaling an image; e.g.
     *
     *     ![:scale 50%](image.png)
     *
     * see also: https://github.com/gnab/remark/issues/72
     */
    remark.macros.scale = function (percentage) {
      var url = this;
      return '<img src="' + url + '" style="width: ' + percentage + '" />';
    };

    var slideshow = remark.create({});

    /*
     * We don't set "startOnLoad" to "true" here, because that will
     * prevent diagrams contained in slides late in the presentation
     * from being generated correctly. Instead, we initialize the
     * diagrams when the user changes slidesFor more information, see
     * the discussion here: https://github.com/knsv/mermaid/issues/360
     *
     * The caveat to this is, if a slide with a diagram is refreshed
     * with the browser, the diagram will not be show correctly without
     * changing to a different slide, and then returning back to the
     * correct slide.
     */
    mermaid.initialize({ startOnLoad: false, cloneCssStyles: false });
    slideshow.on('afterShowSlide', function(s) {
      var diagrams = document.querySelectorAll('.mermaid');
      var i;
      for (i=0; i<diagrams.length; i++) {
        if (diagrams[i].offsetWidth > 0) {
          mermaid.init(undefined, diagrams[i]);
        }
      }
    });
  </script>
{{ end }}
